<script>
var App = {
  state: {
    sheetId: null,
    user: null,
    settings: {},
    currentScreen: 'dashboard',
    accounts: [],
    activeAccount: null,
    tokenWarnings: [],
    analyticsData: null,
    sessionToken: '',
    timeAnalysis: null,
    userInsights: null,
    drafts: [],
    generatedPosts: [],
    // â˜…FIX: competitorData å‰Šé™¤
    currentDraftFilter: '',
    analyticsTab: 'posts',
    createTab: 'ai'
  },
  init: async function() {
    this.state.sessionToken = (window.SERVER_DATA && window.SERVER_DATA.sessionToken) || this.state.sessionToken;
    if (typeof SERVER_DATA !== 'undefined' && SERVER_DATA.sheetId) {
      this.state.sessionToken = SERVER_DATA.sessionToken || this.state.sessionToken;
      this.state.sheetId = SERVER_DATA.sheetId;
      this.state.settings = SERVER_DATA.settings || {};
      this.state.user = SERVER_DATA.user || null;
      this.state.accounts = SERVER_DATA.accounts || [];
      this.state.activeAccount = SERVER_DATA.activeAccount || null;
      this.state.tokenWarnings = SERVER_DATA.tokenWarnings || [];
      localStorage.setItem('threads_tool_sheet_id', SERVER_DATA.sheetId);
      if (window.endSplash) window.endSplash();
      var initial = SERVER_DATA.initialScreen || 'settings';
      if (['welcome','setup','setup-auth','setup-gemini'].indexOf(initial) !== -1) initial = 'settings';
      this.showScreen(initial);
      return;
    }
    var savedId = localStorage.getItem('threads_tool_sheet_id');
    if (savedId) {
      this.state.sheetId = savedId;
      try {
        var settings = await this.api('getSettings', {});
        this.state.settings = settings;
        if (settings && settings.hasAccessToken) {
          var user = await this.api('getUserProfile', {});
          this.state.user = user.user || user;
          await this.loadAccounts();
          if (window.endSplash) window.endSplash();
          var postAuth = sessionStorage.getItem('postAuthRedirect');
          if (postAuth === 'settings') {
            sessionStorage.removeItem('postAuthRedirect');
            this.showScreen('settings');
          } else {
            this.showScreen('dashboard');
          }
          return;
        } else {
          if (window.endSplash) window.endSplash();
          this.showScreen('settings'); return;
        }
      } catch (e) { console.log('init error:', e.message); }
    }
    if (window.endSplash) window.endSplash();
    this.showScreen('settings');
  },
  api: function(action, params) {
    var self = this;
    params = params || {};
    params.action = action;
    params.sheetId = this.state.sheetId;
    var sessionToken = this.state.sessionToken || (window.SERVER_DATA && window.SERVER_DATA.sessionToken);
    if (sessionToken) params.sessionToken = sessionToken;
    if (self.state.demoMode) return self.demoApi_(action, params);
    return new Promise(function(resolve, reject) {
      google.script.run
        .withSuccessHandler(function(result) {
          if (!result) reject(new Error('ã‚µãƒ¼ãƒãƒ¼å¿œç­”ãªã—'));
          else if (result.success) resolve(result.data);
          else reject(new Error(result.error || 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼'));
        })
        .withFailureHandler(function(error) { reject(error); })
        .processApiRequest(params);
    });
  },
  loadAccounts: async function() {
    try {
      this.state.accounts = await this.api('getAccounts', {}) || [];
      this.state.activeAccount = await this.api('getActiveAccount', {}) || null;
    } catch (e) { this.state.accounts = []; this.state.activeAccount = null; }
  },
  switchAccount: async function(accountId) {
    try {
      this.showToast('åˆ‡ã‚Šæ›¿ãˆä¸­â€¦');
      var data = await this.api('switchAccount', { accountId: accountId });
      this.state.accounts = data.accounts || [];
      this.state.user = data.user || {};
      this.state.activeAccount = null;
      for (var i = 0; i < this.state.accounts.length; i++) {
        if (this.state.accounts[i].accountId === accountId) {
          this.state.activeAccount = this.state.accounts[i];
          break;
        }
      }
      this.showToast('ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ', 'success');
      this.showScreen(this.state.currentScreen);
    } catch (e) {
      this.showToast('åˆ‡ã‚Šæ›¿ãˆã‚¨ãƒ©ãƒ¼: ' + e.message, 'error');
    }
  },
  deleteAccount: async function(accountId) {
    var acc = this.state.accounts.find(function(a) { return a.accountId === accountId; });
    if (!confirm('@' + (acc ? acc.username : accountId) + ' ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
    try {
      await this.api('removeAccount', { accountId: accountId });
      await this.loadAccounts();
      var user = await this.api('getUserProfile', {});
      this.state.user = user.user || user;
      this.showToast('å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
      this.showScreen('settings');
    } catch (e) { this.showToast('å‰Šé™¤ã‚¨ãƒ©ãƒ¼: ' + e.message, 'error'); }
  },
  showScreen: function(screen) {
    if (['dashboard', 'analytics', 'create'].indexOf(screen) !== -1 &&
        this.isSetupComplete_ && !this.isSetupComplete_()) {
      this.showToast(' å…ˆã«è¨­å®šã‚’å®Œäº†ã—ã¦ãã ã•ã„', 'warning');
      if (this.refreshNavLock_) this.refreshNavLock_();
      return;
    }
    this.state.currentScreen = screen;
    var app = document.getElementById('app');
    var valid = ['dashboard', 'analytics', 'create', 'settings'];
    if (!this.shellRendered_) {
      app.innerHTML = this.renderShell(screen);
      this.shellRendered_ = true;
      this.bindNavEvents();
    }

    var contentEl = document.getElementById('content');
    if (contentEl) {
      contentEl.innerHTML = this.renderScreenContent(screen);
      contentEl.classList.add('screen-animate');
      var onAnimEnd = function() {
        contentEl.classList.remove('screen-animate');
        contentEl.removeEventListener('animationend', onAnimEnd);
      };
      contentEl.addEventListener('animationend', onAnimEnd);
    }

    document.querySelectorAll('.nav-item').forEach(function(item) {
      item.classList.toggle('active', item.getAttribute('data-screen') === screen);
    });
    if (this.refreshNavLock_) this.refreshNavLock_();

    switch (screen) {
      case 'dashboard':
        this.loadDashboard();
        break;
      case 'analytics':
        this.loadAnalytics();
        break;
      case 'create':
        this.loadCreate();
        break;
      case 'settings':
        this.bindSettingsEvents();
        break;
      default:
        if (contentEl) contentEl.innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
    }

    if (valid.indexOf(screen) !== -1) {
      this.bindTipsEvents();
    }
  }
};

// === ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ ===

App.startDemoMode = function() {
  this.state.demoMode = true;
  this.state.user = { username: 'demo_user', profilePicUrl: '' };
  this.state.activeAccount = { accountId: 'demo', username: 'demo_user', profilePicUrl: '' };
  this.state.settings = { app_id: 'demo', hasAppSecret: true, hasAccessToken: true, hasGeminiKey: true };
  this.state.accounts = [{ accountId: 'demo', username: 'demo_user' }];
  sessionStorage.setItem('insightmaster_demo', '1');
  this.showScreen('dashboard');
};

App.demoApi_ = function(action, params) {
  var self = this;
  return new Promise(function(resolve) {
    setTimeout(function() {
      resolve(self.demoData_(action, params));
    }, 300 + Math.random() * 500);
  });
};

App.demoData_ = function(action, params) {
  var now = new Date();
  switch (action) {
    case 'fetchUserInsights':
      return {
        accountUsername: 'demo_user',
        views: 12450, followersCount: 1823, likes: 487,
        replies: 63, reposts: 28, quotes: 12, clicks: 95,
        demographics: {
          country: { 'æ—¥æœ¬': 1520, 'ã‚¢ãƒ¡ãƒªã‚«': 142, 'ã‚¿ã‚¤': 38, 'å°æ¹¾': 31, 'ãã®ä»–': 92 },
          city: { 'æ±äº¬': 680, 'å¤§é˜ª': 310, 'åå¤å±‹': 125, 'ç¦å²¡': 98, 'æœ­å¹Œ': 72 },
          age: { '18-24': 210, '25-34': 580, '35-44': 620, '45-54': 290, '55-64': 88, '65+': 35 },
          gender: { 'M': 1050, 'F': 680, 'U': 93 }
        }
      };

    case 'getAnalyticsData':
      var demoPosts = [];
      for (var i = 0; i < 25; i++) {
        var d = new Date(now.getTime() - i * 24 * 3600 * 1000);
        var er = Math.round((Math.random() * 8 + 0.5) * 100) / 100;
        var views = Math.floor(Math.random() * 3000 + 200);
        var likes = Math.floor(views * er / 100 * 0.7);
        demoPosts.push({
          postId: 'demo_' + i, text: ['æœæ´»ã§ç”Ÿç”£æ€§3å€ã«ï¼','AIãƒ„ãƒ¼ãƒ«5é¸ã¾ã¨ã‚','ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼1000äººé”æˆã®è£å´','é€±æœ«ã®éã”ã—æ–¹ã§äººç”Ÿå¤‰ã‚ã‚‹','èª­æ›¸ç¿’æ…£ã®ã¤ãã‚Šæ–¹','å‰¯æ¥­ã§æœˆ5ä¸‡ç¨¼ãæ–¹æ³•','Threadsé‹ç”¨ã®ã‚³ãƒ„','ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒæ³•','æ™‚é–“ç®¡ç†è¡“','SNSãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°å…¥é–€','ç¶™ç¶šã®ã‚³ãƒ„ã¯ä»•çµ„ã¿åŒ–','æœã®5åˆ†ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³','å¤±æ•—ã‹ã‚‰å­¦ã‚“ã 3ã¤ã®ã“ã¨','ChatGPTã®æ´»ç”¨è¡“','ãƒŸãƒ‹ãƒãƒªã‚¹ãƒˆç”Ÿæ´»ã®ã™ã™ã‚','é›†ä¸­åŠ›ã‚’é«˜ã‚ã‚‹é£Ÿäº‹','ç¡çœ ã®è³ªã‚’ä¸Šã’ã‚‹æ–¹æ³•','æŠ•è³‡åˆå¿ƒè€…ã‚¬ã‚¤ãƒ‰','è‹±èªå­¦ç¿’ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—','ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ã®å¤§åˆ‡ã•','ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ç‹¬å­¦æ³•','è»¢è·æˆåŠŸã®ãƒã‚¤ãƒ³ãƒˆ','äººé–“é–¢ä¿‚ã®æ•´ç†è¡“','å¥åº·ç¿’æ…£ã¾ã¨ã‚','ç›®æ¨™è¨­å®šã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯'][i],
          mediaType: i % 3 === 0 ? 'IMAGE' : 'TEXT',
          timestamp: d.toISOString(), views: views, likes: likes,
          replies: Math.floor(likes * 0.3), reposts: Math.floor(likes * 0.15),
          quotes: Math.floor(likes * 0.05), engagementRate: er,
          permalink: 'https://www.threads.net/@demo_user/post/' + i
        });
      }
      demoPosts.sort(function(a, b) { return b.engagementRate - a.engagementRate; });
      var totalV = 0, totalL = 0, totalR = 0, totalRp = 0, totalQ = 0;
      demoPosts.forEach(function(p) { totalV += p.views; totalL += p.likes; totalR += p.replies; totalRp += p.reposts; totalQ += p.quotes; });
      var avgEr = totalV > 0 ? Math.round((totalL + totalR + totalRp + totalQ) / totalV * 10000) / 100 : 0;
      return {
        posts: demoPosts,
        summary: { totalPosts: demoPosts.length, totalViews: totalV, totalLikes: totalL, totalReplies: totalR, totalReposts: totalRp, totalQuotes: totalQ, totalShares: 0, avgEngagementRate: avgEr }
      };

    case 'getFollowerHistory':
      var days = (params && params.days) || 7;
      var dates = [], counts = [], changes = [];
      var base = 1780;
      for (var i = days - 1; i >= 0; i--) {
        var d = new Date(now.getTime() - i * 24 * 3600 * 1000);
        dates.push((d.getMonth() + 1) + '/' + d.getDate());
        var change = Math.floor(Math.random() * 12 - 2);
        base += change;
        counts.push(base);
        changes.push(change);
      }
      return { dates: dates, counts: counts, changes: changes };

    case 'getTimeAnalysisData':
      var days = ['æ—¥æ›œ','æœˆæ›œ','ç«æ›œ','æ°´æ›œ','æœ¨æ›œ','é‡‘æ›œ','åœŸæ›œ'];
      var matrix = {};
      days.forEach(function(day) {
        matrix[day] = {};
        for (var h = 0; h < 24; h++) {
          var val = 0;
          if (h >= 7 && h <= 9) val = Math.random() * 4 + 1;
          else if (h >= 12 && h <= 13) val = Math.random() * 3 + 1;
          else if (h >= 20 && h <= 23) val = Math.random() * 6 + 2;
          else if (h >= 6 && h <= 22) val = Math.random() * 2;
          matrix[day][h] = Math.round(val * 100) / 100;
        }
      });
      return { matrix: matrix, hasData: true };

    case 'generateBuzzReport':
      return {
        stats: {
          avgER: { top: 6.8, bottom: 0.9 }, avgLength: { top: 85, bottom: 32 },
          bestHour: 21, bestDay: 'æ°´', avgHour: { top: 20, bottom: 14 },
          mediaRate: { top: 60, bottom: 10 }, questionRate: { top: 50, bottom: 10 },
          hashtagRate: { top: 30, bottom: 5 }, avgHashtags: { top: 1.5, bottom: 0.2 },
          hookLength: { top: 22, bottom: 8 }, avgEngagement: { top: 145, bottom: 12 },
          avgViews: { top: 2800, bottom: 450 }
        },
        topPosts: [
          { text: 'æœæ´»ã§ç”Ÿç”£æ€§3å€ã«ï¼å®Ÿè·µã—ã¦1ãƒ¶æœˆã®çµæœã‚’å…¬é–‹ã—ã¾ã™', er: 8.5, likes: 120, views: 2800, hour: 6, day: 'æœˆ', permalink: '' },
          { text: 'AIãƒ„ãƒ¼ãƒ«5é¸ã¾ã¨ã‚ã€‚å…¨éƒ¨ç„¡æ–™ã§ä½¿ãˆã¾ã™', er: 7.2, likes: 95, views: 2200, hour: 21, day: 'æ°´', permalink: '' },
          { text: 'ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼1000äººé”æˆï¼ã‚„ã£ãŸã“ã¨ã‚’å…¨å…¬é–‹', er: 6.1, likes: 80, views: 1900, hour: 20, day: 'é‡‘', permalink: '' }
        ],
        bottomPosts: [{ text: 'ãŠã¯ã‚ˆã†', er: 0.3 }, { text: 'ãƒ©ãƒ³ãƒ', er: 0.5 }],
        sampleSize: 25, topN: 5, days: params.days || 30, message: null,
        aiReport: '## ğŸ“Š ãƒã‚ºãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æãƒ¬ãƒãƒ¼ãƒˆ\n\n### ç™ºè¦‹ã•ã‚ŒãŸæˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³\n1. **å…·ä½“çš„ãªæ•°å­—ã‚’å«ã‚€æŠ•ç¨¿**ãŒER 6%è¶…ãˆï¼ˆä¾‹: ã€Œ3å€ã€ã€Œ5é¸ã€ã€Œ1000äººã€ï¼‰\n2. **æœ6æ™‚å°ã¨å¤œ21æ™‚å°**ã®æŠ•ç¨¿ãŒé«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹\n3. **ç”»åƒä»˜ãæŠ•ç¨¿**ã®ERã¯ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã®ç´„3å€\n4. **ã€Œã¾ã¨ã‚ã€ã€Œå…¬é–‹ã€ã€Œæ–¹æ³•ã€**ãŒãƒ•ãƒƒã‚¯èªã¨ã—ã¦æœ‰åŠ¹\n\n### ğŸ’¡ æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³\n1. æŠ•ç¨¿æ–‡å­—æ•°ã‚’80-100å­—ã«èª¿æ•´ï¼ˆç¾åœ¨ã®ä¸Šä½å¹³å‡: 85å­—ï¼‰\n2. æ°´ãƒ»é‡‘ã®21æ™‚æŠ•ç¨¿ã‚’é€±2å›ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³åŒ–\n3. è³ªå•å½¢å¼ã€Œã€œã—ã¦ã„ã¾ã™ã‹ï¼Ÿã€ã‚’å†’é ­ã«ä½¿ã†\n\n### ğŸ¯ ãŠã™ã™ã‚ãƒ†ãƒ¼ãƒ3é¸\n1. ã€ŒAI Ã— å‰¯æ¥­ã€ã®å®Ÿè·µãƒ¬ãƒãƒ¼ãƒˆ\n2. ã€Œæœæ´»ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã€ã®ãƒ“ãƒ•ã‚©ãƒ¼ã‚¢ãƒ•ã‚¿ãƒ¼\n3. ã€Œãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼å¢—åŠ ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã€æ•°å€¤ä»˜ã\n\n### âš ï¸ é¿ã‘ã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³\n- çŸ­ã™ãã‚‹æŠ•ç¨¿ï¼ˆ30å­—æœªæº€ã¯ER 1%ä»¥ä¸‹ï¼‰\n- 14æ™‚å°ã®æŠ•ç¨¿ï¼ˆã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæœ€ä½æ™‚é–“å¸¯ï¼‰'
      };

    case 'generateTimeAnalysis':
      return { success: true };
    case 'fetchAndStorePostAnalytics':
      return { success: true, total: 25, newPosts: 3, updatedPosts: 22, accountUsername: 'demo_user' };
    case 'getWeeklyReportList':
      return [];
    case 'generateWeeklyReport':
      return {
        weekStart: new Date(now.getTime() - 7 * 24 * 3600 * 1000).toISOString().slice(0, 10),
        weekEnd: now.toISOString().slice(0, 10),
        followers: { start: 1780, end: 1823, change: 43 },
        summary: { totalPosts: 12, totalViews: 12450, totalLikes: 487, totalReplies: 63, totalReposts: 28, avgEngagementRate: 4.2 },
        topPosts: [
          { text: 'æœæ´»ã§ç”Ÿç”£æ€§3å€ã«ï¼', er: 8.5, likes: 120, views: 2800 },
          { text: 'AIãƒ„ãƒ¼ãƒ«5é¸ã¾ã¨ã‚', er: 7.2, likes: 95, views: 2200 }
        ],
        aiSummary: 'ä»Šé€±ã¯ER 4.2%ã¨å¥½èª¿ã€‚ç‰¹ã«æœæ´»ãƒ»AIé–¢é€£ã®æŠ•ç¨¿ãŒé«˜åå¿œã€‚ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚‚+43ã¨é †èª¿ã«æˆé•·ä¸­ã€‚æ¥é€±ã¯ç”»åƒä»˜ãæŠ•ç¨¿ã‚’å¢—ã‚„ã™ã¨ã•ã‚‰ã«ä¼¸ã³ã‚‹è¦‹è¾¼ã¿ã€‚'
      };
    case 'setupFollowerTrigger':
    case 'setupWeeklyTrigger':
      return { success: true, message: 'ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒˆãƒªã‚¬ãƒ¼ã¯è¨­å®šã•ã‚Œã¾ã›ã‚“' };
    case 'getCompetitors':
      return [];
    case 'getWatchPosts':
      return [];
    case 'generateAnalysisReport':
      return { report: '## ğŸ“Š åˆ†æãƒ¬ãƒãƒ¼ãƒˆï¼ˆãƒ‡ãƒ¢ï¼‰\n\nç›´è¿‘30æ—¥é–“ã®æŠ•ç¨¿ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’åˆ†æã—ã¾ã—ãŸã€‚\n\n### ä¸»è¦æŒ‡æ¨™\n- å¹³å‡ER: **4.2%**ï¼ˆæ¥­ç•Œå¹³å‡2.1%ã®ç´„2å€ï¼‰\n- æœ€ã‚‚åå¿œãŒè‰¯ã„æ™‚é–“å¸¯: **21æ™‚å°**\n- æœ€ã‚‚åå¿œãŒè‰¯ã„æ›œæ—¥: **æ°´æ›œæ—¥**\n\n### å¼·ã¿\n- å…·ä½“çš„ãªæ•°å­—ã‚’å«ã‚€æŠ•ç¨¿ã®ERãŒé«˜ã„\n- æœæ´»ãƒ»ç”Ÿç”£æ€§ãƒ†ãƒ¼ãƒã¨ã®ç›¸æ€§ãŒè‰¯ã„\n\n### æ”¹å–„ç‚¹\n- é€±æœ«ã®æŠ•ç¨¿é »åº¦ã‚’ä¸Šã’ã‚‹\n- å‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å°å…¥ã‚’æ¤œè¨' };
    case 'generateImprovementSuggestions':
      return { suggestions: '## ğŸ’¡ æ”¹å–„ææ¡ˆï¼ˆãƒ‡ãƒ¢ï¼‰\n\n1. **æŠ•ç¨¿é »åº¦ã‚’é€±5â†’7ã«**\n   æ¯æ—¥æŠ•ç¨¿ã™ã‚‹ã“ã¨ã§ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è©•ä¾¡ãŒä¸ŠãŒã‚Šã¾ã™\n\n2. **ç”»åƒã‚’ç©æ¥µæ´»ç”¨**\n   ç¾åœ¨ã®ç”»åƒä½¿ç”¨ç‡30%ã‚’60%ã«å¼•ãä¸Šã’ã¾ã—ã‚‡ã†\n\n3. **è³ªå•ã§çµ‚ã‚ã‚‹æŠ•ç¨¿ã‚’å¢—ã‚„ã™**\n   ã€Œçš†ã•ã‚“ã¯ã©ã†ã—ã¦ã„ã¾ã™ã‹ï¼Ÿã€ã§è¿”ä¿¡ç‡+40%\n\n4. **æŠ•ç¨¿æ™‚é–“ã‚’21æ™‚ã«çµ±ä¸€**\n   åˆ†æãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æœ€ã‚‚ERãŒé«˜ã„æ™‚é–“å¸¯ã§ã™\n\n5. **ã‚·ãƒªãƒ¼ã‚ºæŠ•ç¨¿ã®å°å…¥**\n   ã€Œæœæ´»Day 1/30ã€ã®ã‚ˆã†ãªç¶™ç¶šã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæœ‰åŠ¹' };
    case 'generatePostWithAI':

      return { results: [
        { text: 'æœ5æ™‚èµ·ã30æ—¥ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã®çµæœã€‚\n\nãƒ»é›†ä¸­åŠ›ãŒæ®µé•ã„\nãƒ»åˆå‰ä¸­ã«1æ—¥åˆ†ã®ä»•äº‹ãŒçµ‚ã‚ã‚‹\nãƒ»å¤œã®ç¡çœ ã®è³ªãŒçˆ†ä¸ŠãŒã‚Š\n\næœ€åˆã®1é€±é–“ã¯ã‚­ãƒ„ã‹ã£ãŸã€‚ã§ã‚‚2é€±ç›®ã‹ã‚‰ä½“ãŒæ…£ã‚Œã¦ã€3é€±ç›®ã«ã¯ã€Œãªã‚“ã§ä»Šã¾ã§ã‚„ã‚‰ãªã‹ã£ãŸã‚“ã ã‚ã†ã€ã£ã¦æ€ãˆãŸã€‚\n\nã‚³ãƒ„ã¯ã€Œèµ·ãã‚‹æ™‚é–“ã€ã˜ã‚ƒãªãã€Œå¯ã‚‹æ™‚é–“ã€ã‚’æ±ºã‚ã‚‹ã“ã¨ã€‚', score: 82 },
        { text: 'ã€Œå¿™ã—ã„ã€ãŒå£ç™–ã®äººã¸ã€‚\n\nå¿™ã—ã„ã‚“ã˜ã‚ƒãªãã¦ã€å„ªå…ˆé †ä½ãŒã¤ã‘ã‚‰ã‚Œã¦ã„ãªã„ã ã‘ã€‚\n\næœ¬å½“ã«å¤§äº‹ãªã“ã¨ã¯3ã¤ã ã‘ã€‚ãã‚Œä»¥å¤–ã¯ã€Œã‚„ã‚‰ãªã„ã€ã¨æ±ºã‚ã‚‹å‹‡æ°—ãŒã€äººç”Ÿã‚’å¤‰ãˆã‚‹ã€‚', score: 78 },
        { text: 'èª­æ›¸ã‚’ç¿’æ…£ã«ã—ãŸã„ãªã‚‰ã€ã¾ãšã€Œ1æ—¥1ãƒšãƒ¼ã‚¸ã€ã‹ã‚‰ã€‚\n\n1ãƒšãƒ¼ã‚¸èª­ã‚“ã ã‚‰è‡ªåˆ†ã‚’è¤’ã‚ã‚‹ã€‚\n2ãƒšãƒ¼ã‚¸èª­ã‚ãŸã‚‰ãƒœãƒ¼ãƒŠã‚¹ã€‚\n\næ°—ã¥ã„ãŸã‚‰30åˆ†èª­ã‚“ã§ãŸã€ãŒç†æƒ³ã®æµã‚Œã€‚\n\nãƒãƒ¼ãƒ‰ãƒ«ã¯é™ç•Œã¾ã§ä¸‹ã’ã‚‹ã®ãŒç¶™ç¶šã®ã‚³ãƒ„ã§ã™ã€‚', score: 75 }
      ] };
    case 'generatePostWithAnalysis':
      return { results: [
        { text: 'ã€ãƒ‡ãƒ¼ã‚¿ã§åˆ¤æ˜ã€‘ä¼¸ã³ã‚‹æŠ•ç¨¿ã®å…±é€šç‚¹3ã¤\n\nâ‘  1è¡Œç›®ã§ã€Œãˆï¼Ÿã€ã¨æ€ã‚ã›ã‚‹\nâ‘¡ å…·ä½“çš„ãªæ•°å­—ãŒå…¥ã£ã¦ã„ã‚‹\nâ‘¢ æœ€å¾Œã«å•ã„ã‹ã‘ãŒã‚ã‚‹\n\n300æŠ•ç¨¿ã‚’åˆ†æã—ã¦è¦‹ãˆãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚\n\nã‚ãªãŸã®æŠ•ç¨¿ã€ã“ã®3ã¤æº€ãŸã—ã¦ã¾ã™ã‹ï¼Ÿ', score: 88, analysisNote: 'ERä¸Šä½æŠ•ç¨¿ã®ç‰¹å¾´ï¼ˆè³ªå•å½¢å¼+æ•°å­—ï¼‰ã‚’åæ˜ ' },
        { text: 'æ¯æœ5æ™‚ã«æŠ•ç¨¿ã—ç¶šã‘ã¦3ãƒ¶æœˆã€‚ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼0â†’1,000äººã«ãªã£ãŸã€‚\n\nã‚„ã£ãŸã“ã¨ã¯3ã¤ã ã‘ï¼š\nãƒ»æ¯æ—¥æŠ•ç¨¿ï¼ˆä¼‘ã¾ãªã„ï¼‰\nãƒ»åˆ†æã‚’è¦‹ã¦æ”¹å–„\nãƒ»ä¼¸ã³ãŸæŠ•ç¨¿ã®å‹ã‚’æ¨ªå±•é–‹\n\nç‰¹åˆ¥ãªæ‰èƒ½ã¯ä¸è¦ã€‚ãƒ‡ãƒ¼ã‚¿ã¨ç¶™ç¶šãŒå…¨ã¦ã€‚', score: 85, analysisNote: '21æ™‚å°æŠ•ç¨¿ã®ERå¹³å‡ãŒæœ€ã‚‚é«˜ã„ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨' }
      ] };
    case 'refinePostWithAI':
      return { refined: 'ã€ãƒªãƒ•ã‚¡ã‚¤ãƒ³ä¾‹ã€‘\n\nå…ƒã®æŠ•ç¨¿ã‚’ã‚ˆã‚Šé­…åŠ›çš„ã«ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸã€‚\n\nâœ… ãƒ•ãƒƒã‚¯ã‚’å¼·åŒ–ï¼ˆå†’é ­ã§èˆˆå‘³ã‚’å¼•ãï¼‰\nâœ… å…·ä½“çš„ãªæ•°å­—ã‚’è¿½åŠ \nâœ… æœ€å¾Œã«å•ã„ã‹ã‘ã‚’è¿½åŠ \n\nâ€» ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®ãŸã‚å®Ÿéš›ã®AIãƒªãƒ•ã‚¡ã‚¤ãƒ³ã¯è¨­å®šå®Œäº†å¾Œã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚' };
    case 'saveDraft':
    case 'deleteDraft':
      return { message: 'å‰Šé™¤ã—ã¾ã—ãŸï¼ˆãƒ‡ãƒ¢ï¼‰' };
    case 'toggleDraftStatus':
      return { message: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´ã—ã¾ã—ãŸï¼ˆãƒ‡ãƒ¢ï¼‰' };
      return { message: 'ä¸‹æ›¸ãã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ˆãƒ‡ãƒ¢ï¼‰' };
    case 'getDrafts':
      return [
        { id: 'demo1', text: 'æœ5æ™‚èµ·ã30æ—¥ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã®çµæœã€‚é›†ä¸­åŠ›ãŒæ®µé•ã„ã€‚åˆå‰ä¸­ã«1æ—¥åˆ†ã®ä»•äº‹ãŒçµ‚ã‚ã‚‹ã€‚', status: 'draft', createdAt: new Date(Date.now() - 86400000).toISOString(), tags: 'AIç”Ÿæˆ' },
        { id: 'demo2', text: 'ã€Œå¿™ã—ã„ã€ãŒå£ç™–ã®äººã¸ã€‚å¿™ã—ã„ã‚“ã˜ã‚ƒãªãã¦ã€å„ªå…ˆé †ä½ãŒã¤ã‘ã‚‰ã‚Œã¦ã„ãªã„ã ã‘ã€‚', status: 'posted', createdAt: new Date(Date.now() - 172800000).toISOString(), tags: 'åˆ†æãƒ™ãƒ¼ã‚¹' },
        { id: 'demo3', text: 'èª­æ›¸ã‚’ç¿’æ…£ã«ã—ãŸã„ãªã‚‰ã€ã¾ãšã€Œ1æ—¥1ãƒšãƒ¼ã‚¸ã€ã‹ã‚‰ã€‚ãƒãƒ¼ãƒ‰ãƒ«ã¯é™ç•Œã¾ã§ä¸‹ã’ã‚‹ã®ãŒç¶™ç¶šã®ã‚³ãƒ„ã€‚', status: 'draft', createdAt: new Date(Date.now() - 259200000).toISOString(), tags: '' }
      ];
    case 'searchKeyword':
      return { results: [], message: 'ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†å¾Œã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚' };
      return [];
    case 'getSettings':
      return this.state.settings;
    case 'getUserProfile':
      return { user: this.state.user };
    case 'getAccounts':
      return this.state.accounts;
    case 'getActiveAccount':
      return this.state.activeAccount;
    default:
      return {};
  }
};

</script>

