<script>
var App = {
  state: {
    sheetId: null,
    user: null,
    settings: {},
    currentScreen: 'dashboard',
    accounts: [],
    activeAccount: null,
    tokenWarnings: [],
    analyticsData: null,
    sessionToken: '',
    timeAnalysis: null,
    userInsights: null,
    drafts: [],
    generatedPosts: [],
    // ‚òÖFIX: competitorData ÂâäÈô§
    currentDraftFilter: '',
    analyticsTab: 'posts',
    createTab: 'ai'
  },
  init: async function() {
    this.state.sessionToken = (window.SERVER_DATA && window.SERVER_DATA.sessionToken) || this.state.sessionToken;
    if (typeof SERVER_DATA !== 'undefined' && SERVER_DATA.sheetId) {
      this.state.sessionToken = SERVER_DATA.sessionToken || this.state.sessionToken;
      this.state.sheetId = SERVER_DATA.sheetId;
      this.state.settings = SERVER_DATA.settings || {};
      this.state.user = SERVER_DATA.user || null;
      this.state.accounts = SERVER_DATA.accounts || [];
      this.state.activeAccount = SERVER_DATA.activeAccount || null;
      this.state.tokenWarnings = SERVER_DATA.tokenWarnings || [];
      localStorage.setItem('threads_tool_sheet_id', SERVER_DATA.sheetId);
      if (window.endSplash) window.endSplash();
      var initial = SERVER_DATA.initialScreen || 'settings';
      if (['welcome','setup','setup-auth','setup-gemini'].indexOf(initial) !== -1) initial = 'settings';
      this.showScreen(initial);
      return;
    }
    var savedId = localStorage.getItem('threads_tool_sheet_id');
    if (savedId) {
      this.state.sheetId = savedId;
      try {
        var settings = await this.api('getSettings', {});
        this.state.settings = settings;
        if (settings && settings.hasAccessToken) {
          var user = await this.api('getUserProfile', {});
          this.state.user = user.user || user;
          await this.loadAccounts();
          if (window.endSplash) window.endSplash();
          var postAuth = sessionStorage.getItem('postAuthRedirect');
          if (postAuth === 'settings') {
            sessionStorage.removeItem('postAuthRedirect');
            this.showScreen('settings');
          } else {
            this.showScreen('dashboard');
          }
          return;
        } else {
          if (window.endSplash) window.endSplash();
          this.showScreen('settings'); return;
        }
      } catch (e) { console.log('init error:', e.message); }
    }
    if (window.endSplash) window.endSplash();
    this.showScreen('settings');
  },
  apiCache_: {},
  api: function(action, params) {
    var self = this;
    params = params || {};
    params.action = action;
    params.sheetId = this.state.sheetId;
    var sessionToken = this.state.sessionToken || (window.SERVER_DATA && window.SERVER_DATA.sessionToken);
    if (sessionToken) params.sessionToken = sessionToken;
    if (self.state.demoMode) return self.demoApi_(action, params);
    var cacheActions = ['getAnalyticsData','getTimeAnalysisData','fetchUserInsights','getFollowerHistory','getWeeklyReportList','getCompetitors','getWatchPosts','getDrafts','getAccounts','getActiveAccount'];
    var cacheKey = action + '_' + JSON.stringify(params.periodDays || params.days || '');
    if (cacheActions.indexOf(action) !== -1 && self.apiCache_[cacheKey] && (Date.now() - self.apiCache_[cacheKey].ts < 300000)) {
      return Promise.resolve(self.apiCache_[cacheKey].data);
    }
    return new Promise(function(resolve, reject) {
      google.script.run
        .withSuccessHandler(function(result) {
          if (!result) reject(new Error('„Çµ„Éº„Éê„ÉºÂøúÁ≠î„Å™„Åó'));
          else if (result.success) {
            if (cacheActions.indexOf(action) !== -1) self.apiCache_[cacheKey] = { data: result.data, ts: Date.now() };
            resolve(result.data);
          } else reject(new Error(result.error || '‰∏çÊòé„Å™„Ç®„É©„Éº'));
        })
        .withFailureHandler(function(error) { reject(error); })
        .processApiRequest(params);
    });
    });
  },
  clearApiCache: function() { this.apiCache_ = {}; },
  loadAccounts: async function() {
    try {
      this.state.accounts = await this.api('getAccounts', {}) || [];
      this.state.activeAccount = await this.api('getActiveAccount', {}) || null;
    } catch (e) { this.state.accounts = []; this.state.activeAccount = null; }
  },
  switchAccount: async function(accountId) {
    try {
      this.showToast('Âàá„ÇäÊõø„Åà‰∏≠‚Ä¶');
      var data = await this.api('switchAccount', { accountId: accountId });
      this.state.accounts = data.accounts || [];
      this.state.user = data.user || {};
      this.state.activeAccount = null;
      for (var i = 0; i < this.state.accounts.length; i++) {
        if (this.state.accounts[i].accountId === accountId) {
          this.state.activeAccount = this.state.accounts[i];
          break;
        }
      }
      this.showToast('„Ç¢„Ç´„Ç¶„É≥„Éà„ÇíÂàá„ÇäÊõø„Åà„Åæ„Åó„Åü', 'success');
      this.showScreen(this.state.currentScreen);
    } catch (e) {
      this.showToast('Âàá„ÇäÊõø„Åà„Ç®„É©„Éº: ' + e.message, 'error');
    }
  },
  deleteAccount: async function(accountId) {
    var acc = this.state.accounts.find(function(a) { return a.accountId === accountId; });
    if (!confirm('@' + (acc ? acc.username : accountId) + ' „ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) return;
    try {
      await this.api('removeAccount', { accountId: accountId });
      await this.loadAccounts();
      var user = await this.api('getUserProfile', {});
      this.state.user = user.user || user;
      this.showToast('ÂâäÈô§„Åó„Åæ„Åó„Åü', 'success');
      this.showScreen('settings');
    } catch (e) { this.showToast('ÂâäÈô§„Ç®„É©„Éº: ' + e.message, 'error'); }
  },
  showScreen: function(screen) {
    if (['dashboard', 'analytics', 'create'].indexOf(screen) !== -1 &&
        this.isSetupComplete_ && !this.isSetupComplete_()) {
      this.showToast(' ÂÖà„Å´Ë®≠ÂÆö„ÇíÂÆå‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'warning');
      if (this.refreshNavLock_) this.refreshNavLock_();
      return;
    }
    this.state.currentScreen = screen;
    var app = document.getElementById('app');
    var valid = ['dashboard', 'analytics', 'create', 'settings'];
    if (!this.shellRendered_) {
      app.innerHTML = this.renderShell(screen);
      this.shellRendered_ = true;
      this.bindNavEvents();
    }

    var contentEl = document.getElementById('content');
    if (contentEl) {
      contentEl.innerHTML = this.renderScreenContent(screen);
      contentEl.classList.add('screen-animate');
      var onAnimEnd = function() {
        contentEl.classList.remove('screen-animate');
        contentEl.removeEventListener('animationend', onAnimEnd);
      };
      contentEl.addEventListener('animationend', onAnimEnd);
    }

    document.querySelectorAll('.nav-item').forEach(function(item) {
      item.classList.toggle('active', item.getAttribute('data-screen') === screen);
    });
    if (this.refreshNavLock_) this.refreshNavLock_();

    switch (screen) {
      case 'dashboard':
        this.loadDashboard();
        break;
      case 'analytics':
        this.loadAnalytics();
        break;
      case 'create':
        this.loadCreate();
        break;
      case 'settings':
        this.bindSettingsEvents();
        break;
      default:
        if (contentEl) contentEl.innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
    }

    if (valid.indexOf(screen) !== -1) {
      this.bindTipsEvents();
    }
  }
};

// === „Éá„É¢„É¢„Éº„Éâ ===

App.startDemoMode = function() {
  this.state.demoMode = true;
  this.state.user = { username: 'demo_user', profilePicUrl: '' };
  this.state.activeAccount = { accountId: 'demo', username: 'demo_user', profilePicUrl: '' };
  this.state.settings = { app_id: 'demo', hasAppSecret: true, hasAccessToken: true, hasGeminiKey: true };
  this.state.accounts = [{ accountId: 'demo', username: 'demo_user' }];
  sessionStorage.setItem('insightmaster_demo', '1');
  this.showScreen('dashboard');
};

App.demoApi_ = function(action, params) {
  var self = this;
  return new Promise(function(resolve) {
    setTimeout(function() {
      resolve(self.demoData_(action, params));
    }, 300 + Math.random() * 500);
  });
};

App.demoData_ = function(action, params) {
  var now = new Date();
  switch (action) {
    case 'fetchUserInsights':
      return {
        accountUsername: 'demo_user',
        views: 12450, followersCount: 1823, likes: 487,
        replies: 63, reposts: 28, quotes: 12, clicks: 95,
        demographics: {
          country: { 'Êó•Êú¨': 1520, '„Ç¢„É°„É™„Ç´': 142, '„Çø„Ç§': 38, 'Âè∞Êπæ': 31, '„Åù„ÅÆ‰ªñ': 92 },
          city: { 'Êù±‰∫¨': 680, 'Â§ßÈò™': 310, 'ÂêçÂè§Â±ã': 125, 'Á¶èÂ≤°': 98, 'Êú≠Âπå': 72 },
          age: { '18-24': 210, '25-34': 580, '35-44': 620, '45-54': 290, '55-64': 88, '65+': 35 },
          gender: { 'M': 1050, 'F': 680, 'U': 93 }
        }
      };

    case 'getAnalyticsData':
      var demoPosts = [];
      for (var i = 0; i < 25; i++) {
        var d = new Date(now.getTime() - i * 24 * 3600 * 1000);
        var er = Math.round((Math.random() * 8 + 0.5) * 100) / 100;
        var views = Math.floor(Math.random() * 3000 + 200);
        var likes = Math.floor(views * er / 100 * 0.7);
        demoPosts.push({
          postId: 'demo_' + i, text: ['ÊúùÊ¥ª„ÅßÁîüÁî£ÊÄß3ÂÄç„Å´ÔºÅ','AI„ÉÑ„Éº„É´5ÈÅ∏„Åæ„Å®„ÇÅ','„Éï„Ç©„É≠„ÉØ„Éº1000‰∫∫ÈÅîÊàê„ÅÆË£èÂÅ¥','ÈÄ±Êú´„ÅÆÈÅé„Åî„ÅóÊñπ„Åß‰∫∫ÁîüÂ§â„Çè„Çã','Ë™≠Êõ∏ÁøíÊÖ£„ÅÆ„Å§„Åè„ÇäÊñπ','ÂâØÊ•≠„ÅßÊúà5‰∏áÁ®º„ÅêÊñπÊ≥ï','ThreadsÈÅãÁî®„ÅÆ„Ç≥„ÉÑ','„É¢„ÉÅ„Éô„Éº„Ç∑„Éß„É≥Á∂≠ÊåÅÊ≥ï','ÊôÇÈñìÁÆ°ÁêÜË°ì','SNS„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞ÂÖ•ÈñÄ','Á∂ôÁ∂ö„ÅÆ„Ç≥„ÉÑ„ÅØ‰ªïÁµÑ„ÅøÂåñ','Êúù„ÅÆ5ÂàÜ„É´„Éº„ÉÜ„Ç£„É≥','Â§±Êïó„Åã„ÇâÂ≠¶„Çì„Å†3„Å§„ÅÆ„Åì„Å®','ChatGPT„ÅÆÊ¥ªÁî®Ë°ì','„Éü„Éã„Éû„É™„Çπ„ÉàÁîüÊ¥ª„ÅÆ„Åô„Åô„ÇÅ','ÈõÜ‰∏≠Âäõ„ÇíÈ´ò„ÇÅ„ÇãÈ£ü‰∫ã','Áù°Áú†„ÅÆË≥™„Çí‰∏ä„Åí„ÇãÊñπÊ≥ï','ÊäïË≥áÂàùÂøÉËÄÖ„Ç¨„Ç§„Éâ','Ëã±Ë™ûÂ≠¶Áøí„ÅÆ„É≠„Éº„Éâ„Éû„ÉÉ„Éó','„É°„É≥„Çø„É´„Éò„É´„Çπ„ÅÆÂ§ßÂàá„Åï','„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Áã¨Â≠¶Ê≥ï','Ëª¢ËÅ∑ÊàêÂäü„ÅÆ„Éù„Ç§„É≥„Éà','‰∫∫ÈñìÈñ¢‰øÇ„ÅÆÊï¥ÁêÜË°ì','ÂÅ•Â∫∑ÁøíÊÖ£„Åæ„Å®„ÇÅ','ÁõÆÊ®ôË®≠ÂÆö„ÅÆ„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ'][i],
          mediaType: i % 3 === 0 ? 'IMAGE' : 'TEXT',
          timestamp: d.toISOString(), views: views, likes: likes,
          replies: Math.floor(likes * 0.3), reposts: Math.floor(likes * 0.15),
          quotes: Math.floor(likes * 0.05), engagementRate: er,
          permalink: 'https://www.threads.net/@demo_user/post/' + i
        });
      }
      demoPosts.sort(function(a, b) { return b.engagementRate - a.engagementRate; });
      var totalV = 0, totalL = 0, totalR = 0, totalRp = 0, totalQ = 0;
      demoPosts.forEach(function(p) { totalV += p.views; totalL += p.likes; totalR += p.replies; totalRp += p.reposts; totalQ += p.quotes; });
      var avgEr = totalV > 0 ? Math.round((totalL + totalR + totalRp + totalQ) / totalV * 10000) / 100 : 0;
      return {
        posts: demoPosts,
        summary: { totalPosts: demoPosts.length, totalViews: totalV, totalLikes: totalL, totalReplies: totalR, totalReposts: totalRp, totalQuotes: totalQ, totalShares: 0, avgEngagementRate: avgEr }
      };

    case 'getFollowerHistory':
      var days = (params && params.days) || 7;
      var dates = [], counts = [], changes = [];
      var base = 1780;
      for (var i = days - 1; i >= 0; i--) {
        var d = new Date(now.getTime() - i * 24 * 3600 * 1000);
        dates.push((d.getMonth() + 1) + '/' + d.getDate());
        var change = Math.floor(Math.random() * 12 - 2);
        base += change;
        counts.push(base);
        changes.push(change);
      }
      return { dates: dates, counts: counts, changes: changes };

    case 'getTimeAnalysisData':
      var days = ['Êó•Êõú','ÊúàÊõú','ÁÅ´Êõú','Ê∞¥Êõú','Êú®Êõú','ÈáëÊõú','ÂúüÊõú'];
      var matrix = {};
      days.forEach(function(day) {
        matrix[day] = {};
        for (var h = 0; h < 24; h++) {
          var val = 0;
          if (h >= 7 && h <= 9) val = Math.random() * 4 + 1;
          else if (h >= 12 && h <= 13) val = Math.random() * 3 + 1;
          else if (h >= 20 && h <= 23) val = Math.random() * 6 + 2;
          else if (h >= 6 && h <= 22) val = Math.random() * 2;
          matrix[day][h] = Math.round(val * 100) / 100;
        }
      });
      return { matrix: matrix, hasData: true };

    case 'generateBuzzReport':
      return {
        stats: {
          avgER: { top: 6.8, bottom: 0.9 }, avgLength: { top: 85, bottom: 32 },
          bestHour: 21, bestDay: 'Ê∞¥', avgHour: { top: 20, bottom: 14 },
          mediaRate: { top: 60, bottom: 10 }, questionRate: { top: 50, bottom: 10 },
          hashtagRate: { top: 30, bottom: 5 }, avgHashtags: { top: 1.5, bottom: 0.2 },
          hookLength: { top: 22, bottom: 8 }, avgEngagement: { top: 145, bottom: 12 },
          avgViews: { top: 2800, bottom: 450 }
        },
        topPosts: [
          { text: 'ÊúùÊ¥ª„ÅßÁîüÁî£ÊÄß3ÂÄç„Å´ÔºÅÂÆüË∑µ„Åó„Å¶1„É∂Êúà„ÅÆÁµêÊûú„ÇíÂÖ¨Èñã„Åó„Åæ„Åô', er: 8.5, likes: 120, views: 2800, hour: 6, day: 'Êúà', permalink: '' },
          { text: 'AI„ÉÑ„Éº„É´5ÈÅ∏„Åæ„Å®„ÇÅ„ÄÇÂÖ®ÈÉ®ÁÑ°Êñô„Åß‰Ωø„Åà„Åæ„Åô', er: 7.2, likes: 95, views: 2200, hour: 21, day: 'Ê∞¥', permalink: '' },
          { text: '„Éï„Ç©„É≠„ÉØ„Éº1000‰∫∫ÈÅîÊàêÔºÅ„ÇÑ„Å£„Åü„Åì„Å®„ÇíÂÖ®ÂÖ¨Èñã', er: 6.1, likes: 80, views: 1900, hour: 20, day: 'Èáë', permalink: '' }
        ],
        bottomPosts: [{ text: '„Åä„ÅØ„Çà„ÅÜ', er: 0.3 }, { text: '„É©„É≥„ÉÅ', er: 0.5 }],
        sampleSize: 25, topN: 5, days: params.days || 30, message: null,
        aiReport: '## üìä „Éê„Ç∫„Éë„Çø„Éº„É≥ÂàÜÊûê„É¨„Éù„Éº„Éà\n\n### Áô∫Ë¶ã„Åï„Çå„ÅüÊàêÂäü„Éë„Çø„Éº„É≥\n1. **ÂÖ∑‰ΩìÁöÑ„Å™Êï∞Â≠ó„ÇíÂê´„ÇÄÊäïÁ®ø**„ÅåER 6%Ë∂Ö„ÅàÔºà‰æã: „Äå3ÂÄç„Äç„Äå5ÈÅ∏„Äç„Äå1000‰∫∫„ÄçÔºâ\n2. **Êúù6ÊôÇÂè∞„Å®Â§ú21ÊôÇÂè∞**„ÅÆÊäïÁ®ø„ÅåÈ´ò„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ\n3. **ÁîªÂÉè‰ªò„ÅçÊäïÁ®ø**„ÅÆER„ÅØ„ÉÜ„Ç≠„Çπ„Éà„ÅÆ„Åø„ÅÆÁ¥Ñ3ÂÄç\n4. **„Äå„Åæ„Å®„ÇÅ„Äç„ÄåÂÖ¨Èñã„Äç„ÄåÊñπÊ≥ï„Äç**„Åå„Éï„ÉÉ„ÇØË™û„Å®„Åó„Å¶ÊúâÂäπ\n\n### üí° ÊîπÂñÑ„Ç¢„ÇØ„Ç∑„Éß„É≥\n1. ÊäïÁ®øÊñáÂ≠óÊï∞„Çí80-100Â≠ó„Å´Ë™øÊï¥ÔºàÁèæÂú®„ÅÆ‰∏ä‰ΩçÂπ≥Âùá: 85Â≠óÔºâ\n2. Ê∞¥„ÉªÈáë„ÅÆ21ÊôÇÊäïÁ®ø„ÇíÈÄ±2Âõû„É´„Éº„ÉÜ„Ç£„É≥Âåñ\n3. Ë≥™ÂïèÂΩ¢Âºè„Äå„Äú„Åó„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü„Äç„ÇíÂÜíÈ†≠„Å´‰Ωø„ÅÜ\n\n### üéØ „Åä„Åô„Åô„ÇÅ„ÉÜ„Éº„Éû3ÈÅ∏\n1. „ÄåAI √ó ÂâØÊ•≠„Äç„ÅÆÂÆüË∑µ„É¨„Éù„Éº„Éà\n2. „ÄåÊúùÊ¥ª„É´„Éº„ÉÜ„Ç£„É≥„Äç„ÅÆ„Éì„Éï„Ç©„Éº„Ç¢„Éï„Çø„Éº\n3. „Äå„Éï„Ç©„É≠„ÉØ„ÉºÂ¢óÂä†„ÉÜ„ÇØ„Éã„ÉÉ„ÇØ„ÄçÊï∞ÂÄ§‰ªò„Åç\n\n### ‚ö†Ô∏è ÈÅø„Åë„Çã„Åπ„Åç„Éë„Çø„Éº„É≥\n- Áü≠„Åô„Åé„ÇãÊäïÁ®øÔºà30Â≠óÊú™Ê∫Ä„ÅØER 1%‰ª•‰∏ãÔºâ\n- 14ÊôÇÂè∞„ÅÆÊäïÁ®øÔºà„Ç®„É≥„Ç≤„Éº„Ç∏„É°„É≥„ÉàÊúÄ‰ΩéÊôÇÈñìÂ∏ØÔºâ'
      };

    case 'generateTimeAnalysis':
      return { success: true };
    case 'fetchAndStorePostAnalytics':
      return { success: true, total: 25, newPosts: 3, updatedPosts: 22, accountUsername: 'demo_user' };
    case 'getWeeklyReportList':
      return [];
    case 'generateWeeklyReport':
      return {
        weekStart: new Date(now.getTime() - 7 * 24 * 3600 * 1000).toISOString().slice(0, 10),
        weekEnd: now.toISOString().slice(0, 10),
        followers: { start: 1780, end: 1823, change: 43 },
        summary: { totalPosts: 12, totalViews: 12450, totalLikes: 487, totalReplies: 63, totalReposts: 28, avgEngagementRate: 4.2 },
        topPosts: [
          { text: 'ÊúùÊ¥ª„ÅßÁîüÁî£ÊÄß3ÂÄç„Å´ÔºÅ', er: 8.5, likes: 120, views: 2800 },
          { text: 'AI„ÉÑ„Éº„É´5ÈÅ∏„Åæ„Å®„ÇÅ', er: 7.2, likes: 95, views: 2200 }
        ],
        aiSummary: '‰ªäÈÄ±„ÅØER 4.2%„Å®Â•ΩË™ø„ÄÇÁâπ„Å´ÊúùÊ¥ª„ÉªAIÈñ¢ÈÄ£„ÅÆÊäïÁ®ø„ÅåÈ´òÂèçÂøú„ÄÇ„Éï„Ç©„É≠„ÉØ„Éº„ÇÇ+43„Å®È†ÜË™ø„Å´ÊàêÈï∑‰∏≠„ÄÇÊù•ÈÄ±„ÅØÁîªÂÉè‰ªò„ÅçÊäïÁ®ø„ÇíÂ¢ó„ÇÑ„Åô„Å®„Åï„Çâ„Å´‰º∏„Å≥„ÇãË¶ãËæº„Åø„ÄÇ'
      };
    case 'setupFollowerTrigger':
    case 'setupWeeklyTrigger':
      return { success: true, message: '„Éá„É¢„É¢„Éº„Éâ„Åß„ÅØ„Éà„É™„Ç¨„Éº„ÅØË®≠ÂÆö„Åï„Çå„Åæ„Åõ„Çì' };
    case 'getCompetitors':
      return [];
    case 'getWatchPosts':
      return [];
    case 'generateAnalysisReport':
      return { report: '## üìä ÂàÜÊûê„É¨„Éù„Éº„ÉàÔºà„Éá„É¢Ôºâ\n\nÁõ¥Ëøë30Êó•Èñì„ÅÆÊäïÁ®ø„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÇíÂàÜÊûê„Åó„Åæ„Åó„Åü„ÄÇ\n\n### ‰∏ªË¶ÅÊåáÊ®ô\n- Âπ≥ÂùáER: **4.2%**ÔºàÊ•≠ÁïåÂπ≥Âùá2.1%„ÅÆÁ¥Ñ2ÂÄçÔºâ\n- ÊúÄ„ÇÇÂèçÂøú„ÅåËâØ„ÅÑÊôÇÈñìÂ∏Ø: **21ÊôÇÂè∞**\n- ÊúÄ„ÇÇÂèçÂøú„ÅåËâØ„ÅÑÊõúÊó•: **Ê∞¥ÊõúÊó•**\n\n### Âº∑„Åø\n- ÂÖ∑‰ΩìÁöÑ„Å™Êï∞Â≠ó„ÇíÂê´„ÇÄÊäïÁ®ø„ÅÆER„ÅåÈ´ò„ÅÑ\n- ÊúùÊ¥ª„ÉªÁîüÁî£ÊÄß„ÉÜ„Éº„Éû„Å®„ÅÆÁõ∏ÊÄß„ÅåËâØ„ÅÑ\n\n### ÊîπÂñÑÁÇπ\n- ÈÄ±Êú´„ÅÆÊäïÁ®øÈ†ªÂ∫¶„Çí‰∏ä„Åí„Çã\n- ÂãïÁîª„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅÆÂ∞éÂÖ•„ÇíÊ§úË®é' };
    case 'generateImprovementSuggestions':
      return { suggestions: '## üí° ÊîπÂñÑÊèêÊ°àÔºà„Éá„É¢Ôºâ\n\n1. **ÊäïÁ®øÈ†ªÂ∫¶„ÇíÈÄ±5‚Üí7„Å´**\n   ÊØéÊó•ÊäïÁ®ø„Åô„Çã„Åì„Å®„Åß„Ç¢„É´„Ç¥„É™„Ç∫„É†Ë©ï‰æ°„Åå‰∏ä„Åå„Çä„Åæ„Åô\n\n2. **ÁîªÂÉè„ÇíÁ©çÊ•µÊ¥ªÁî®**\n   ÁèæÂú®„ÅÆÁîªÂÉè‰ΩøÁî®Áéá30%„Çí60%„Å´Âºï„Åç‰∏ä„Åí„Åæ„Åó„Çá„ÅÜ\n\n3. **Ë≥™Âïè„ÅßÁµÇ„Çè„ÇãÊäïÁ®ø„ÇíÂ¢ó„ÇÑ„Åô**\n   „ÄåÁöÜ„Åï„Çì„ÅØ„Å©„ÅÜ„Åó„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü„Äç„ÅßËøî‰ø°Áéá+40%\n\n4. **ÊäïÁ®øÊôÇÈñì„Çí21ÊôÇ„Å´Áµ±‰∏Ä**\n   ÂàÜÊûê„Éá„Éº„Çø„Åã„ÇâÊúÄ„ÇÇER„ÅåÈ´ò„ÅÑÊôÇÈñìÂ∏Ø„Åß„Åô\n\n5. **„Ç∑„É™„Éº„Ç∫ÊäïÁ®ø„ÅÆÂ∞éÂÖ•**\n   „ÄåÊúùÊ¥ªDay 1/30„Äç„ÅÆ„Çà„ÅÜ„Å™Á∂ôÁ∂ö„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅåÊúâÂäπ' };
    case 'generatePostWithAI':

      return { results: [
        { text: 'Êúù5ÊôÇËµ∑„Åç30Êó•„ÉÅ„É£„É¨„É≥„Ç∏„ÅÆÁµêÊûú„ÄÇ\n\n„ÉªÈõÜ‰∏≠Âäõ„ÅåÊÆµÈÅï„ÅÑ\n„ÉªÂçàÂâç‰∏≠„Å´1Êó•ÂàÜ„ÅÆ‰ªï‰∫ã„ÅåÁµÇ„Çè„Çã\n„ÉªÂ§ú„ÅÆÁù°Áú†„ÅÆË≥™„ÅåÁàÜ‰∏ä„Åå„Çä\n\nÊúÄÂàù„ÅÆ1ÈÄ±Èñì„ÅØ„Ç≠„ÉÑ„Åã„Å£„Åü„ÄÇ„Åß„ÇÇ2ÈÄ±ÁõÆ„Åã„Çâ‰Ωì„ÅåÊÖ£„Çå„Å¶„ÄÅ3ÈÄ±ÁõÆ„Å´„ÅØ„Äå„Å™„Çì„Åß‰ªä„Åæ„Åß„ÇÑ„Çâ„Å™„Åã„Å£„Åü„Çì„Å†„Çç„ÅÜ„Äç„Å£„Å¶ÊÄù„Åà„Åü„ÄÇ\n\n„Ç≥„ÉÑ„ÅØ„ÄåËµ∑„Åç„ÇãÊôÇÈñì„Äç„Åò„ÇÉ„Å™„Åè„ÄåÂØù„ÇãÊôÇÈñì„Äç„ÇíÊ±∫„ÇÅ„Çã„Åì„Å®„ÄÇ', score: 82 },
        { text: '„ÄåÂøô„Åó„ÅÑ„Äç„ÅåÂè£Áôñ„ÅÆ‰∫∫„Å∏„ÄÇ\n\nÂøô„Åó„ÅÑ„Çì„Åò„ÇÉ„Å™„Åè„Å¶„ÄÅÂÑ™ÂÖàÈ†Ü‰Ωç„Åå„Å§„Åë„Çâ„Çå„Å¶„ÅÑ„Å™„ÅÑ„Å†„Åë„ÄÇ\n\nÊú¨ÂΩì„Å´Â§ß‰∫ã„Å™„Åì„Å®„ÅØ3„Å§„Å†„Åë„ÄÇ„Åù„Çå‰ª•Â§ñ„ÅØ„Äå„ÇÑ„Çâ„Å™„ÅÑ„Äç„Å®Ê±∫„ÇÅ„ÇãÂãáÊ∞ó„Åå„ÄÅ‰∫∫Áîü„ÇíÂ§â„Åà„Çã„ÄÇ', score: 78 },
        { text: 'Ë™≠Êõ∏„ÇíÁøíÊÖ£„Å´„Åó„Åü„ÅÑ„Å™„Çâ„ÄÅ„Åæ„Åö„Äå1Êó•1„Éö„Éº„Ç∏„Äç„Åã„Çâ„ÄÇ\n\n1„Éö„Éº„Ç∏Ë™≠„Çì„Å†„ÇâËá™ÂàÜ„ÇíË§í„ÇÅ„Çã„ÄÇ\n2„Éö„Éº„Ç∏Ë™≠„ÇÅ„Åü„Çâ„Éú„Éº„Éä„Çπ„ÄÇ\n\nÊ∞ó„Å•„ÅÑ„Åü„Çâ30ÂàÜË™≠„Çì„Åß„Åü„ÄÅ„ÅåÁêÜÊÉ≥„ÅÆÊµÅ„Çå„ÄÇ\n\n„Éè„Éº„Éâ„É´„ÅØÈôêÁïå„Åæ„Åß‰∏ã„Åí„Çã„ÅÆ„ÅåÁ∂ôÁ∂ö„ÅÆ„Ç≥„ÉÑ„Åß„Åô„ÄÇ', score: 75 }
      ] };
    case 'generatePostWithAnalysis':
      return { results: [
        { text: '„Äê„Éá„Éº„Çø„ÅßÂà§Êòé„Äë‰º∏„Å≥„ÇãÊäïÁ®ø„ÅÆÂÖ±ÈÄöÁÇπ3„Å§\n\n‚ë† 1Ë°åÁõÆ„Åß„Äå„ÅàÔºü„Äç„Å®ÊÄù„Çè„Åõ„Çã\n‚ë° ÂÖ∑‰ΩìÁöÑ„Å™Êï∞Â≠ó„ÅåÂÖ•„Å£„Å¶„ÅÑ„Çã\n‚ë¢ ÊúÄÂæå„Å´Âïè„ÅÑ„Åã„Åë„Åå„ÅÇ„Çã\n\n300ÊäïÁ®ø„ÇíÂàÜÊûê„Åó„Å¶Ë¶ã„Åà„Åü„Éë„Çø„Éº„É≥„Åß„Åô„ÄÇ\n\n„ÅÇ„Å™„Åü„ÅÆÊäïÁ®ø„ÄÅ„Åì„ÅÆ3„Å§Ê∫Ä„Åü„Åó„Å¶„Åæ„Åô„ÅãÔºü', score: 88, analysisNote: 'ER‰∏ä‰ΩçÊäïÁ®ø„ÅÆÁâπÂæ¥ÔºàË≥™ÂïèÂΩ¢Âºè+Êï∞Â≠óÔºâ„ÇíÂèçÊò†' },
        { text: 'ÊØéÊúù5ÊôÇ„Å´ÊäïÁ®ø„ÅóÁ∂ö„Åë„Å¶3„É∂Êúà„ÄÇ„Éï„Ç©„É≠„ÉØ„Éº0‚Üí1,000‰∫∫„Å´„Å™„Å£„Åü„ÄÇ\n\n„ÇÑ„Å£„Åü„Åì„Å®„ÅØ3„Å§„Å†„ÅëÔºö\n„ÉªÊØéÊó•ÊäïÁ®øÔºà‰ºë„Åæ„Å™„ÅÑÔºâ\n„ÉªÂàÜÊûê„ÇíË¶ã„Å¶ÊîπÂñÑ\n„Éª‰º∏„Å≥„ÅüÊäïÁ®ø„ÅÆÂûã„ÇíÊ®™Â±ïÈñã\n\nÁâπÂà•„Å™ÊâçËÉΩ„ÅØ‰∏çË¶Å„ÄÇ„Éá„Éº„Çø„Å®Á∂ôÁ∂ö„ÅåÂÖ®„Å¶„ÄÇ', score: 85, analysisNote: '21ÊôÇÂè∞ÊäïÁ®ø„ÅÆERÂπ≥Âùá„ÅåÊúÄ„ÇÇÈ´ò„ÅÑ„Éá„Éº„Çø„ÇíÊ¥ªÁî®' }
      ] };
    case 'refinePostWithAI':
      return { refined: '„Äê„É™„Éï„Ç°„Ç§„É≥‰æã„Äë\n\nÂÖÉ„ÅÆÊäïÁ®ø„Çí„Çà„ÇäÈ≠ÖÂäõÁöÑ„Å´„Éñ„É©„ÉÉ„Ç∑„É•„Ç¢„ÉÉ„Éó„Åó„Åæ„Åó„Åü„ÄÇ\n\n‚úÖ „Éï„ÉÉ„ÇØ„ÇíÂº∑ÂåñÔºàÂÜíÈ†≠„ÅßËààÂë≥„ÇíÂºï„ÅèÔºâ\n‚úÖ ÂÖ∑‰ΩìÁöÑ„Å™Êï∞Â≠ó„ÇíËøΩÂä†\n‚úÖ ÊúÄÂæå„Å´Âïè„ÅÑ„Åã„Åë„ÇíËøΩÂä†\n\n‚Äª „Éá„É¢„É¢„Éº„Éâ„ÅÆ„Åü„ÇÅÂÆüÈöõ„ÅÆAI„É™„Éï„Ç°„Ç§„É≥„ÅØË®≠ÂÆöÂÆå‰∫ÜÂæå„Å´„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ' };
    case 'saveDraft':
    case 'deleteDraft':
      return { message: 'ÂâäÈô§„Åó„Åæ„Åó„ÅüÔºà„Éá„É¢Ôºâ' };
    case 'toggleDraftStatus':
      return { message: '„Çπ„ÉÜ„Éº„Çø„Çπ„ÇíÂ§âÊõ¥„Åó„Åæ„Åó„ÅüÔºà„Éá„É¢Ôºâ' };
      return { message: '‰∏ãÊõ∏„Åç„Çí‰øùÂ≠ò„Åó„Åæ„Åó„ÅüÔºà„Éá„É¢Ôºâ' };
    case 'getDrafts':
      return [
        { id: 'demo1', text: 'Êúù5ÊôÇËµ∑„Åç30Êó•„ÉÅ„É£„É¨„É≥„Ç∏„ÅÆÁµêÊûú„ÄÇÈõÜ‰∏≠Âäõ„ÅåÊÆµÈÅï„ÅÑ„ÄÇÂçàÂâç‰∏≠„Å´1Êó•ÂàÜ„ÅÆ‰ªï‰∫ã„ÅåÁµÇ„Çè„Çã„ÄÇ', status: 'draft', createdAt: new Date(Date.now() - 86400000).toISOString(), tags: 'AIÁîüÊàê' },
        { id: 'demo2', text: '„ÄåÂøô„Åó„ÅÑ„Äç„ÅåÂè£Áôñ„ÅÆ‰∫∫„Å∏„ÄÇÂøô„Åó„ÅÑ„Çì„Åò„ÇÉ„Å™„Åè„Å¶„ÄÅÂÑ™ÂÖàÈ†Ü‰Ωç„Åå„Å§„Åë„Çâ„Çå„Å¶„ÅÑ„Å™„ÅÑ„Å†„Åë„ÄÇ', status: 'posted', createdAt: new Date(Date.now() - 172800000).toISOString(), tags: 'ÂàÜÊûê„Éô„Éº„Çπ' },
        { id: 'demo3', text: 'Ë™≠Êõ∏„ÇíÁøíÊÖ£„Å´„Åó„Åü„ÅÑ„Å™„Çâ„ÄÅ„Åæ„Åö„Äå1Êó•1„Éö„Éº„Ç∏„Äç„Åã„Çâ„ÄÇ„Éè„Éº„Éâ„É´„ÅØÈôêÁïå„Åæ„Åß‰∏ã„Åí„Çã„ÅÆ„ÅåÁ∂ôÁ∂ö„ÅÆ„Ç≥„ÉÑ„ÄÇ', status: 'draft', createdAt: new Date(Date.now() - 259200000).toISOString(), tags: '' }
      ];
    case 'searchKeyword':
      return { results: [], message: '„Éá„É¢„É¢„Éº„Éâ„Åß„ÅØ„Ç≠„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢„ÅØÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Çª„ÉÉ„Éà„Ç¢„ÉÉ„ÉóÂÆå‰∫ÜÂæå„Å´„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ' };
      return [];
    case 'getSettings':
      return this.state.settings;
    case 'getUserProfile':
      return { user: this.state.user };
    case 'getAccounts':
      return this.state.accounts;
    case 'getActiveAccount':
      return this.state.activeAccount;
    default:
      return {};
  }
};

</script>

